{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/editor.css') }}">
{% endblock %}

{% block content %}
<div class="editor-container">
    <div class="editor-header">
        <input type="text" id="quiz-name" placeholder="Quiz Name">
        <div class="editor-actions">
            <span id="save-status" style="margin-right: 1rem; font-size: 0.9rem;">Saved</span>
            <button id="back-btn" class="btn">Back</button>
        </div>
    </div>
    <div class="editor-main">
        <div class="editor-sidebar">
            <h3>Screen Size & Layout <span id="view-indicator" class="view-indicator">(Display)</span></h3>
            <div class="screen-size-controls">
                <div class="preset-buttons">
                    <button id="preset-desktop" class="preset-btn active">Desktop</button>
                    <button id="preset-mobile-portrait" class="preset-btn">Mobile (Portrait)</button>
                    <button id="preset-mobile-landscape" class="preset-btn">Mobile (Landscape)</button>
                    <button id="preset-custom" class="preset-btn">Custom</button>
                </div>
                <div class="custom-size-inputs" id="custom-size-inputs" style="display: none;">
                    <div class="size-input-group">
                        <label>Width (px)</label>
                        <input type="number" id="canvas-width" min="100" max="5000" value="1920">
                    </div>
                    <div class="size-input-group">
                        <label>Height (px)</label>
                        <input type="number" id="canvas-height" min="100" max="5000" value="1080">
                    </div>
                    <button id="apply-custom-size" class="btn btn-small">Apply</button>
                </div>
            </div>
            <h3>Zoom <span id="zoom-view-indicator" class="view-indicator">(Display)</span></h3>
            <div class="zoom-controls">
                <div class="zoom-buttons">
                    <button id="zoom-out" class="zoom-btn" title="Zoom Out">âˆ’</button>
                    <span id="zoom-level" class="zoom-level">100%</span>
                    <button id="zoom-in" class="zoom-btn" title="Zoom In">+</button>
                    <button id="zoom-fit" class="zoom-btn" title="Fit to Screen">Fit</button>
                    <button id="zoom-reset" class="zoom-btn" title="Reset Zoom">Reset</button>
                </div>
                <input type="range" id="zoom-slider" min="25" max="200" value="100" class="zoom-slider">
            </div>
            <h3>Elements</h3>
            <div class="element-list">
                <div class="element-item" data-type="media">Media</div>
                <div class="element-item" data-type="richtext">Rich Text</div>
                <div class="element-item" data-type="rectangle">Rectangle</div>
                <div class="element-item" data-type="circle">Circle</div>
                <div class="element-item" data-type="triangle">Triangle</div>
                <div class="element-item" data-type="arrow">Arrow</div>
                <div class="element-item" data-type="line">Line</div>
            </div>
            <h3>Pages</h3>
            <div id="pages-list"></div>
            <button id="add-page-btn" class="btn btn-small">Add Page</button>
            <button id="add-status-page-btn" class="btn btn-small">Add Status Page</button>
            <button id="add-results-page-btn" class="btn btn-small">Add Results Page</button>
        </div>
        <div class="editor-canvas-container">
            <div class="canvas-tabs">
                <button class="canvas-tab active" data-view="display">Display</button>
                <button class="canvas-tab" data-view="participant">Participant</button>
                <button class="canvas-tab" data-view="control">Control</button>
            </div>
            <div class="canvas-scroll-area" id="general-canvas">
                <div id="displayable-area-wrapper">
                    <div id="displayable-area"></div>
                    <!-- Resize handles -->
                    <div class="resize-handle resize-handle-n" data-direction="n"></div>
                    <div class="resize-handle resize-handle-s" data-direction="s"></div>
                    <div class="resize-handle resize-handle-e" data-direction="e"></div>
                    <div class="resize-handle resize-handle-w" data-direction="w"></div>
                    <div class="resize-handle resize-handle-ne" data-direction="ne"></div>
                    <div class="resize-handle resize-handle-nw" data-direction="nw"></div>
                    <div class="resize-handle resize-handle-se" data-direction="se"></div>
                    <div class="resize-handle resize-handle-sw" data-direction="sw"></div>
                </div>
            </div>
        </div>
        <div class="properties-resize-handle"></div>
        <div class="editor-properties">
            <h3>Properties</h3>
            <div id="properties-panel"></div>
        </div>
    </div>
</div>

<!-- Media Selection Modal -->
<div id="media-modal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Select Media</h2>
            <button class="modal-close" id="media-modal-close">&times;</button>
        </div>
        <div class="modal-tabs">
            <button class="modal-tab active" data-tab="images">Images</button>
            <button class="modal-tab" data-tab="audio">Audio</button>
            <button class="modal-tab" data-tab="video">Video</button>
        </div>
        <div class="modal-body">
            <div id="media-tab-images" class="modal-tab-content active">
                <div class="media-section">
                    <h3>My Media</h3>
                    <div id="my-images-list" class="media-list"></div>
                </div>
                <div class="media-section">
                    <h3>Public Media</h3>
                    <div id="public-images-list" class="media-list"></div>
                </div>
                <button class="btn btn-primary" id="upload-image-btn">Upload Image</button>
                <input type="file" id="upload-image-file" accept="image/*" style="display: none;" multiple>
            </div>
            <div id="media-tab-audio" class="modal-tab-content">
                <div class="media-section">
                    <h3>My Media</h3>
                    <div id="my-audio-list" class="media-list"></div>
                </div>
                <div class="media-section">
                    <h3>Public Media</h3>
                    <div id="public-audio-list" class="media-list"></div>
                </div>
                <button class="btn btn-primary" id="upload-audio-btn">Upload Audio</button>
                <input type="file" id="upload-audio-file" accept="audio/*" style="display: none;" multiple>
            </div>
            <div id="media-tab-video" class="modal-tab-content">
                <div class="media-section">
                    <h3>My Media</h3>
                    <div id="my-video-list" class="media-list"></div>
                </div>
                <div class="media-section">
                    <h3>Public Media</h3>
                    <div id="public-video-list" class="media-list"></div>
                </div>
                <button class="btn btn-primary" id="upload-video-btn">Upload Video</button>
                <input type="file" id="upload-video-file" accept="video/*" style="display: none;" multiple>
            </div>
        </div>
    </div>
</div>

<!-- Question type modules for editor preview -->
<script src="{{ url_for('static', filename='js/question-types/common.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/text/control_view.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/text/control_mockup.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/radio/control_view.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/radio/control_mockup.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/checkbox/control_view.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/checkbox/control_mockup.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/stopwatch/control_view.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/stopwatch/control_mockup.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/image_click/control_view.js') }}"></script>
<script src="{{ url_for('static', filename='js/question-types/image_click/control_mockup.js') }}"></script>
<!-- Editor modules -->
<script src="{{ url_for('static', filename='js/editor/utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/quiz-storage.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/page-manager.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/element-creator.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/media-modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/interaction-handlers.js') }}"></script>
<script src="{{ url_for('static', filename='js/editor/element-renderer.js') }}"></script>
<!-- Main editor file -->
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
{% endblock %}

